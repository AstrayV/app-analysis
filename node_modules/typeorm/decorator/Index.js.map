{"version":3,"sources":["../../src/decorator/Index.ts"],"names":[],"mappings":";;AAAA,kCAAgD;AAkChD;;GAEG;AACH,eAAsB,qBAAyG,EACzG,oBAAkG,EAClG,YAA2B;IAC7C,IAAM,IAAI,GAAG,OAAO,qBAAqB,KAAK,QAAQ,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,SAAS,CAAC;IAC3F,IAAM,MAAM,GAAG,OAAO,qBAAqB,KAAK,QAAQ,CAAC,CAAC,CAAkE,oBAAoB,CAAC,CAAC,CAAC,qBAAiC,CAAC;IACrL,IAAI,OAAO,GAAG,CAAC,OAAO,qBAAqB,KAAK,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC,qBAAqC,CAAC,CAAC,CAAC,YAAY,CAAC;IAC1J,IAAI,CAAC,OAAO;QACR,OAAO,GAAG,CAAC,OAAO,oBAAoB,KAAK,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,oBAAoC,CAAC,CAAC,CAAC,YAAY,CAAC;IAEvJ,OAAO,UAAU,WAA4B,EAAE,YAAqB;QAChE,IAAM,IAAI,GAAsB;YAC5B,MAAM,EAAE,YAAY,CAAC,CAAC,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,WAAuB;YACxE,IAAI,EAAE,IAAI;YACV,OAAO,EAAE,YAAY,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,MAAM;YAC/C,MAAM,EAAE,OAAO,IAAI,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK;YAChD,MAAM,EAAE,OAAO,IAAI,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK;SACnD,CAAC;QACF,8BAAsB,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAChD,CAAC,CAAC;AACN,CAAC;AAnBD,sBAmBC","file":"Index.js","sourcesContent":["import {getMetadataArgsStorage} from \"../index\";\nimport {IndexMetadataArgs} from \"../metadata-args/IndexMetadataArgs\";\nimport {IndexOptions} from \"./options/IndexOptions\";\n\n/**\n * Composite index must be set on entity classes and must specify entity's fields to be indexed.\n */\nexport function Index(options?: IndexOptions): Function;\n\n/**\n * Composite index must be set on entity classes and must specify entity's fields to be indexed.\n */\nexport function Index(name: string, options?: IndexOptions): Function;\n\n/**\n * Composite index must be set on entity classes and must specify entity's fields to be indexed.\n */\nexport function Index(name: string, fields: string[], options?: IndexOptions): Function;\n\n/**\n * Composite index must be set on entity classes and must specify entity's fields to be indexed.\n */\nexport function Index(fields: string[], options?: IndexOptions): Function;\n\n/**\n * Composite index must be set on entity classes and must specify entity's fields to be indexed.\n */\nexport function Index(fields: (object?: any) => (any[]|{ [key: string]: number }), options?: IndexOptions): Function;\n\n/**\n * Composite index must be set on entity classes and must specify entity's fields to be indexed.\n */\nexport function Index(name: string, fields: (object?: any) => (any[]|{ [key: string]: number }), options?: IndexOptions): Function;\n\n/**\n * Composite index must be set on entity classes and must specify entity's fields to be indexed.\n */\nexport function Index(nameOrFieldsOrOptions?: string|string[]|((object: any) => (any[]|{ [key: string]: number }))|IndexOptions,\n                      maybeFieldsOrOptions?: ((object?: any) => (any[]|{ [key: string]: number }))|IndexOptions|string[],\n                      maybeOptions?: IndexOptions): Function {\n    const name = typeof nameOrFieldsOrOptions === \"string\" ? nameOrFieldsOrOptions : undefined;\n    const fields = typeof nameOrFieldsOrOptions === \"string\" ? <((object?: any) => (any[]|{ [key: string]: number }))|string[]> maybeFieldsOrOptions : nameOrFieldsOrOptions as string[];\n    let options = (typeof nameOrFieldsOrOptions === \"object\" && !Array.isArray(nameOrFieldsOrOptions)) ? nameOrFieldsOrOptions as IndexOptions : maybeOptions;\n    if (!options)\n        options = (typeof maybeFieldsOrOptions === \"object\" && !Array.isArray(maybeFieldsOrOptions)) ? maybeFieldsOrOptions as IndexOptions : maybeOptions;\n\n    return function (clsOrObject: Function|Object, propertyName?: string) {\n        const args: IndexMetadataArgs = {\n            target: propertyName ? clsOrObject.constructor : clsOrObject as Function,\n            name: name,\n            columns: propertyName ? [propertyName] : fields,\n            unique: options && options.unique ? true : false,\n            sparse: options && options.sparse ? true : false\n        };\n        getMetadataArgsStorage().indices.push(args);\n    };\n}\n"],"sourceRoot":".."}